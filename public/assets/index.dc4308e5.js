(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const m of o.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&i(m)}).observe(document,{childList:!0,subtree:!0});function r(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerpolicy&&(o.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?o.credentials="include":l.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(l){if(l.ep)return;l.ep=!0;const o=r(l);fetch(l.href,o)}})();const y={PLAYER:"_vs_ictr_player",PLAYER_WRAPPER:"_vs_ictr_player-wrapper"},A="ICTR_WRAPPER",v={INIT:"wrapper:INIT",FS_ENABLED:"wrapper:FS_ENABLED"},R="ICTR_PLAYER",g={READY:"player:READY",TOGGLE_FS:"player:TOGGLE_FS",LOADED:"player:DATA_LOADED"};class N{constructor(){this.frames=document.getElementsByClassName(y.PLAYER)}sendInitInfo(e){for(let r=0;r<this.frames.length;r++){const i=this.frames[r],l=C(10);i.id=l;const o={embeddingId:l,...e};this.notify(i,v.INIT,o)}}notify(e,r,i={}){var l=JSON.stringify(Object.assign({name:r,from:A},i));e.contentWindow.postMessage(l,"*")}wrapPlayerIframes(){for(var e=0;e<this.frames.length;e++){var r=this.frames[e];this.wrapElement(r)}}wrapElement(e){var r=parseInt(e.getAttribute("width"),10),i=parseInt(e.getAttribute("height"),10),l=isNaN(r)?720:r,o=isNaN(i)?405:i,m=o/l;e.removeAttribute("width"),e.removeAttribute("height");var p=document.createElement("div");e.parentNode.insertBefore(p,e),p.className=y.PLAYER_WRAPPER,p.style.paddingTop=m*100+"%",p.appendChild(e)}getFrameById(e){if(!e||typeof e!="string")return console.error("missing app id for ictr-player frame ");var r=document.getElementById(e);return!r||r.tagName!="IFRAME"?console.error("couldn't find the ictr-player frame for the given id"):r}}function C(t){let e="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(var i=0;i<t;i++)e+=r.charAt(Math.floor(Math.random()*r.length));return e}var u={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5,fullscreen:6},w=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],b=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],L=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"],c=typeof window<"u"&&typeof window.document<"u"?window.document:{},f="fullscreenEnabled"in c&&Object.keys(u)||w[0]in c&&w||b[0]in c&&b||L[0]in c&&L||[],O={requestFullscreen:function(t){return t[f[u.requestFullscreen]]()},requestFullscreenFunction:function(t){return t[f[u.requestFullscreen]]},get exitFullscreen(){return c[f[u.exitFullscreen]].bind(c)},get fullscreenPseudoClass(){return":"+f[u.fullscreen]},addEventListener:function(t,e,r){return c.addEventListener(f[u[t]],e,r)},removeEventListener:function(t,e,r){return c.removeEventListener(f[u[t]],e,r)},get fullscreenEnabled(){return Boolean(c[f[u.fullscreenEnabled]])},set fullscreenEnabled(t){},get fullscreenElement(){return c[f[u.fullscreenElement]]},set fullscreenElement(t){},get onfullscreenchange(){return c[("on"+f[u.fullscreenchange]).toLowerCase()]},set onfullscreenchange(t){return c[("on"+f[u.fullscreenchange]).toLowerCase()]=t},get onfullscreenerror(){return c[("on"+f[u.fullscreenerror]).toLowerCase()]},set onfullscreenerror(t){return c[("on"+f[u.fullscreenerror]).toLowerCase()]=t}};const E=O,F=E.fullscreenEnabled;function x(t){E.onfullscreenchange||(E.onfullscreenchange=e=>{_(t,v.FS_ENABLED,{fullScreenEnabled:!!E.fullscreenElement})})}function D(t){F&&(E.fullscreenElement?E.exitFullscreen():(E.requestFullscreen(t),x(t)))}const _=(t,e,r={})=>{var i=JSON.stringify(Object.assign({name:e,from:A},r));t.contentWindow.postMessage(i,"*")};(function(){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",t):t();function t(){if(console.log("Interactive Player Loaded"),window.__ictr_wrpr_check__)return;window.__ictr_wrpr_check__=!0;var e=document.querySelectorAll("[data-hash]");e.length>0&&e.forEach(n=>{if(n.querySelector("iframe"))return;const s=document.createElement("iframe");if(n.getAttribute("data-context")=="preview"){const h=n.getAttribute("api-url"),S=n.getAttribute("analytics-url"),P=n.getAttribute("project-id"),I=n.getAttribute("preview-node-id")?n.getAttribute("preview-node-id"):!1;s.src=`http://localhost:5175/?context=preview&projectId=${P}&apiUrl=${h}&analyticsUrl=${S}&appEnv=production&previewNodeId=${I}`}else{const h=n.getAttribute("data-hash");s.src=`http://localhost:5175/?hash=${h}&apiUrl=http://localhost:8000&analyticsUrl=https://localhost:8080&appEnv=production`}s.width="100%",s.height="100%",s.frameBorder="none",s.classList.add(y.PLAYER);const a=n.getElementsByClassName("iv-player_embed")[0];a.prepend(s),a.lastElementChild.style.transition="opacity 0.5s ease 0s",a.lastElementChild.style.opacity=1}),window.__ictr_run_wrapper=t;const r=new N;var i=p();window.addEventListener("message",l);function l(n){if(typeof n.data=="object"&&n.data.from===R){var{eventType:s,embeddingId:d}=n.data;if(s===g.READY&&r.sendInitInfo({dynamicParams:i}),d){var a=r.getFrameById(d);a&&(s===g.TOGGLE_FS&&(F?D(a):m(a)),s===g.LOADED&&(a.nextElementSibling.style.opacity=0,a.nextElementSibling.addEventListener("webkitTransitionEnd",function(h){a.nextElementSibling.style.zIndex=-1},!1)))}}}const o={position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:"99999999"};function m(n){const s="fullscreen-overlay",d=n.classList;d.contains(s)?(n.classList.remove(s),n.style.position="",n.style.top="",n.style.left="",n.style.width="",n.style.height="",n.style.zIndex=""):(n.classList.add(s),Object.assign(n.style,o)),_(n,v.FS_ENABLED,{fullScreenEnabled:!!d.contains(s)})}function p(){var n=document.location.search,s={};if(typeof n=="string"){var d=new URLSearchParams(n);for(var a of d.entries())s[a[0]]=a[1]}return s}}})();
